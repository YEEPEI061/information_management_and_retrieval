<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Trail Microservice</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .card {
        border: 1px solid #ccc;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 8px;
      }
      h2 {
        margin-top: 40px;
      }
      ul {
        margin-top: 5px;
      }
    </style>
  </head>

  <body>
    <h1>Trail Microservice</h1>

    <!-- ==========================
         TRAILS SECTION
    ============================ -->
    <h2>All Trails</h2>

    {% for trail in trails %}
    <div class="card">
      <h3>{{ trail.trail_name }}</h3>

      <p><strong>Description:</strong> {{ trail.description }}</p>
      <p><strong>Length:</strong> {{ trail.length }} km</p>
      <p><strong>Elevation Gain:</strong> {{ trail.elevation_gain }} m</p>
      <p><strong>Estimated Time:</strong> {{ trail.estimated_time }} hrs</p>

      <p><strong>Route Type:</strong> {{ trail.route_type.route_type_name }}</p>
      <p><strong>Difficulty:</strong> {{ trail.difficulty.difficulty_name }}</p>
      <p><strong>Location:</strong> {{ trail.location.location_name }}</p>

      <p>
        <strong>Tags:</strong>
        {% for tag in trail.tags %}
          {{ tag.trail_tag_name }}{% if not loop.last %}, {% endif %}
        {% endfor %}
      </p>

      <h4>Waypoints</h4>
      <ul>
        {% for wp in trail.waypoints %}
        <li>
          {{ wp.sequence_no }} â€” {{ wp.waypoint_name }}
          (Lat: {{ wp.latitude }}, Long: {{ wp.longitude }})
        </li>
        {% endfor %}
      </ul>

      <h4>Photos</h4>
      <ul>
        {% for photo in trail.photos %}
        <li>
          <img src="{{ photo.photo_url }}" alt="Trail photo"
               style="max-width:150px; display:block; margin-bottom:5px;" />
          {{ photo.caption }}
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endfor %}

    <!-- ==========================
         ACTIVITIES SECTION
    ============================ -->
    <h2>All Activities</h2>

    {% for act in activities %}
    <div class="card">
      <h3>Activity by {{ act.user.username }}</h3>

      <p><strong>Trail:</strong> {{ act.trail_name }}</p>
      <p><strong>Length:</strong> {{ act.length }} km</p>
      <p><strong>Elevation Gain:</strong> {{ act.elevation_gain }} m</p>
      <p><strong>Moving Time:</strong> {{ act.moving_time }}s</p>
      <p><strong>Total Time:</strong> {{ act.total_time }}s</p>
      <p><strong>Calories:</strong> {{ act.calories }}</p>
      <p><strong>Average Pace:</strong> {{ act.avg_pace }} min/km</p>
      <p><strong>Rating:</strong> {{ act.rating }}/5</p>

      <p><strong>Notes:</strong> {{ act.notes }}</p>

      <h4>Photos</h4>
      <ul>
        {% for photo in act.photos %}
        <li>
          <img src="{{ photo.photo_url }}" alt="Activity photo"
               style="max-width:150px; display:block; margin-bottom:5px;" />
          {{ photo.caption }}
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endfor %}

    <!-- ==========================
         USER LISTS SECTION
    ============================ -->
    <h2>All User Lists</h2>

    {% for ul in userlists %}
    <div class="card">
      <h3>{{ ul.name }}</h3>

      <p><strong>User:</strong> {{ ul.user.username }}</p>

      <p>
        <strong>Trail:</strong>
        {% if ul.trail_name %}
          {{ ul.trail_name }}
        {% else %}
          <i>No trail selected</i>
        {% endif %}
      </p>

      <p><strong>Visibility:</strong> {{ ul.visibility }}</p>
      <p><strong>Created:</strong> {{ ul.created_at }}</p>
      <p><strong>Updated:</strong> {{ ul.updated_at }}</p>
    </div>
    {% endfor %}
  </body>
</html>
